<div [class]="wrapperClasses()">
  <!-- Label -->
  @if (label()) {
    <label
      [id]="labelId()"
      [class.textarea__label--disabled]="disabled()"
      class="textarea__label"
      [for]="'textarea-' + labelId()"
    >
      {{ label() }}
      @if (required()) {
        <span class="textarea__label__required" aria-label="required">*</span>
      }
    </label>
  }

  <!-- Textarea Container -->
  <div class="textarea__wrapper">
    <textarea
      #textareaElement
      [id]="label() ? 'textarea-' + labelId() : undefined"
      [class]="textareaClasses()"
      [value]="internalValue()"
      [name]="name()"
      [placeholder]="placeholder()"
      [disabled]="disabled()"
      [readonly]="readonly()"
      [required]="required()"
      [rows]="rows()"
      [attr.maxlength]="maxLength()"
      [attr.minlength]="minLength()"
      [attr.aria-label]="ariaLabel()"
      [attr.aria-labelledby]="labelId()"
      [attr.aria-describedby]="computedAriaDescribedBy()"
      [attr.aria-invalid]="computedAriaInvalid()"
      [attr.aria-required]="required() ? 'true' : undefined"
      (input)="handleInput($event)"
      (focus)="handleFocus($event)"
      (blur)="handleBlur($event)"
    ></textarea>
  </div>

  <!-- Footer (Helper Text and Character Count) -->
  @if (showFooter()) {
    <eb-input-footer
      [helperText]="helperText()"
      [helperTextId]="helperTextId()"
      [helperTextClasses]="helperTextClasses()"
      [showCharCount]="shouldShowCharCount()"
      [maxLength]="maxLength()"
      [charCountText]="charCountText()"
    />
  }
</div>
